# Changelog

All notable changes to this project will be documented in this file.

## [unreleased]

### 🚀 Features

- #76, clarify search results
- #52, search by genre
- Add entire genre; show item counts in queue and genre columns

### 🐛 Bug Fixes

- User interactions in search page with no results resulting in NPE. (#79)
- Some (optional?) attributes are provided with different types by gonic and navidrome, which breaks json unmarshalling. To support this, a custom unmarshaller will have to be written; in the meantime, to prevent panics, the attributes have been removed. We aren't using them (yet) anyway.
- Issue #88, duplicate key binding for "scan" and "save queue as playlist"
- Lyrics for songs were being loaded in the wrong place, and so weren't updating from song to song unless the album art also changed.
- Clarifies search help text
- During the merge, a field rename prevented unmarshalling of search results
- Search page apropos focus now focuses appropriately
- Queue page root was being created twice, and the second time omitted the song info, causing it to not be shown until the user toggled it on
- Adding an artist replaces artist in cache with next artist. This is a consequence of the unexpected tview behavior that List.SetChangedFunc calls the callback _before_ changing the value returned by GetCurrentItem; so if the callback calls GetCurrentItem, it'll get the wrong value.
- ReplayGain is specific to Navidrome (and is not documented in OpenSubsonic) but I added it to the API in case we want to support it at some point. However, it had the wrong structure, which caused issues with deserialization on Navidrome.
- Entity list wasn't advancing the cursor
- Only adds lyrics support if the server has the OpenSubsonic lyrics extension
- Update README to reflect removing background playlist syncing

### ⚙️ Miscellaneous Tasks

- Fix if cond
- Typo

### Add

- Fetch version information from build info
- Search now pro-actively searches until no more results are returned. It still queries in batches of 20, and updates the list(s) as results are available.
- Concurrent album art and lyrics fetching; should improve UI lag on slow server responses

### Adds

- Ability to toggle song info panel on queue page via `i` (courtesy of @mahmed2000)

### Change

- Re-arranges the song info; purely aesthic chang (#81)
- Browser now works on metadata, not directory structure. Not all functions fully tested, but it works.
- Tweaks the lyrics timing offset to try to hit that sweet spot that makes up for the inaccuracy of mpv
- Rolls back the (unrelated, unnecessary) logger changes
- Changelog is updated, and readme updated to list the extra merged features
- Display the song genre, or the album genre if the server doesn't provide song-level genres
- Adds a work-around for Navidrome not populating the `albumArtist` field in songs
- Lyrics uses binary search instead of linear search to find current lyric.

## [0.1.0] - 2024-10-15

### 🐛 Bug Fixes

- #33 selected entry gets stuck
- Second edge case of #33
- Readme linting errors from last commit
- Makefile rule was never updating the change log

### ⚙️ Miscellaneous Tasks

- Add screenshotter which maybe works
- Typo
- Merge screenshot job into build job
- Download binary of termshot
- Fix leftover
- Remove if-arm64
- Fix build

## [0.0.9] - 2024-09-12

### 🐛 Bug Fixes

- Mpris not implementing the right interface

### ⚙️ Miscellaneous Tasks

- Rename mpris player (Player -> stmps)

### Queue

- Fix scroll behaviour, unexport some methods

<!-- generated by git-cliff -->
